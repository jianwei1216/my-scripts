$def with (content)
<div><span id="afr_num"></span></div><!--冗余，不显示-->
<div><span id="strip_num"></span></div><!--分片，不显示-->
<div><span id="disperse_num"></span><span id="disk_num"></span></div><!--纠删码，不显示-->
<form id="formclusterservice" method="post">
    <fieldset class="createdialog">
        <div>
            <label for="clusterservicename">$_("clusterservicename")</label>
            <select name="clusterservicename" id="clusterservicename" class="ui-widget-content ui-corner-all" onchange="getServiceInfo()">
            </select><input type="hidden" id="name_afr" />&nbsp;&nbsp;&nbsp;<strong id="service_type"></strong>&nbsp;&nbsp;&nbsp;<strong>$_('afr')</strong>&nbsp;<span id="service_afr">-</span>&nbsp;&nbsp;&nbsp;<strong>$_('strip')</strong>&nbsp;<span id="service_stripe">-</span><br /><br />
        </div>
        <div id="pcontent">
        </div>
        <label>&nbsp;</label>
    </fieldset>
</form>

<script type="text/javascript">
$(ELT)(document).ready(function(){
    getService();
});

function getService(){
	checkSession();
    var url = '/clusterservicextendservice?' + new Date().getTime();
    $(ELT).ajax({
        url: url,
        type: 'POST',
        beforeSend: function(){
            $(ELT)('#clusterservicename').html('');
            $(ELT)('#clusterservicename').append('<option class="ajaximg">数据加载中...</option>');
            custLoading("$_('Loading Data ...')");
        },
        dataType: 'JSON',
        success: function(text){
        	$(ELT)('#loaddialog').dialog('close');
            $(ELT)('#clusterservicename').html('');
			//$(ELT)('#clusterservicename').append("<option value='' selected=selected>$_('select')</option>");
            var services = text;
			$(ELT)('#name_afr').val(services.toString())
            for(var i = 0; i < services.length; i++){
				var name=services[i].split('::');
				$(ELT)('#clusterservicename').append('<option value="' + name[0] + '">' + name[0] + '</option>' );
                //$(ELT)('#clusterservicename').append('<option value="' + services[i] + '">' + services[i] + '</option>' );
            }
			$(ELT)('#disk_num').parent().hide();
			$(ELT)('#disperse_num').parent().hide();
			$(ELT)('#afr_num').parent().hide();
			$(ELT)('#strip_num').parent().hide();
			clusternoderaidload();
			getServiceInfo();
        },
        error: function(msg){
            alert('error');
        }
    });
}

function clusternoderaidload(){
	var url = "/clusterserviceraidload_select?" + new Date().getTime();
	$(ELT)("#pcontent").load(url,'',function(){
		$(ELT)('#loaddialog').dialog('close');									 
	});
}

function getServiceInfo(){
    var servicename = $(ELT)('#clusterservicename').val();
    $(ELT)('#service_afr').html('-');
    var afrs_arr=$(ELT)('#name_afr').val().split(',');
    for(var i=0;i<afrs_arr.length;i++){
        afr_arr=afrs_arr[i].split('::');
        if(servicename==afr_arr[0]){
            if(afr_arr[1]=='NaN'){    //非冗余
                $(ELT)('#service_afr').html('-');
                $(ELT)('#service_stripe').html('-');
                $(ELT)('#afr_num').html('');
                $(ELT)('#strip_num').html('');
                $(ELT)('#disk_num').html('');
                $(ELT)('#disperse_num').html('');
            }else{    //冗余
                $(ELT)('#service_afr').html(afr_arr[1]);
                if(afr_arr[2]=='NaN'){
                    $(ELT)('#service_stripe').html('-');
                }else{
                    $(ELT)('#service_stripe').html(afr_arr[2]);
                }
                if(afr_arr[1] && afr_arr[2]){
                    if(parseInt(afr_arr[1]) <= parseInt(afr_arr[2])){    //N+M分片冗余
                        $(ELT)('#disk_num').html(parseInt(afr_arr[1])+parseInt(afr_arr[2]));
                        $(ELT)('#disperse_num').html(parseInt(afr_arr[1]));
                        $(ELT)('#afr_num').html('');
                        $(ELT)('#strip_num').html('');
                    }else{   //分片冗余
                        $(ELT)('#disk_num').html(parseInt(afr_arr[1])*parseInt(afr_arr[2]));
                        $(ELT)('#afr_num').html(afr_arr[1]);
                        $(ELT)('#strip_num').html(afr_arr[2]);
                        $(ELT)('#disperse_num').html('');
                    }
                }else{    //冗余或分片
                    $(ELT)('#afr_num').html(afr_arr[1]);
                    $(ELT)('#strip_num').html(afr_arr[2]);
                    $(ELT)('#disperse_num').html('');
                    $(ELT)('disk_num').html('');
                }
            }
            break;
        }
    }
}
function getServiceDisperseInfo(){
	var servicename = $(ELT)('#clusterservicename').val();
	$(ELT)('#service_afr').html('-');
}
</script>
